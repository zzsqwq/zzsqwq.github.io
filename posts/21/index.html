<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>背包进阶 | Zs's Blog</title>
<meta name=keywords content="Luogu,dp,背包"><meta name=description content="1. 分组背包

题意
在01背包基础上，将其中的物体分成 $k$ 组，每组内的物品相互冲突，即只能取其中一个，问最大价值。"><meta name=author content="zzsqwq"><link rel=canonical href=https://blog.zzsqwq.cn/posts/21/><meta name=google-site-verification content="G-WF7TH97J9X"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.zzsqwq.cn/images/avatar.png><link rel=icon type=image/png sizes=16x16 href=https://blog.zzsqwq.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.zzsqwq.cn/images/favicon-32x32.ico><link rel=apple-touch-icon href=https://blog.zzsqwq.cn/apple-touch-icon.png><link rel=mask-icon href=https://blog.zzsqwq.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.zzsqwq.cn/posts/21/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-WF7TH97J9X"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WF7TH97J9X")}</script><meta property="og:title" content="背包进阶"><meta property="og:description" content="1. 分组背包

题意
在01背包基础上，将其中的物体分成 $k$ 组，每组内的物品相互冲突，即只能取其中一个，问最大价值。"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.zzsqwq.cn/posts/21/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-02-09T00:38:00+00:00"><meta property="article:modified_time" content="2020-02-09T00:38:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="背包进阶"><meta name=twitter:description content="1. 分组背包

题意
在01背包基础上，将其中的物体分成 $k$ 组，每组内的物品相互冲突，即只能取其中一个，问最大价值。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.zzsqwq.cn/posts/"},{"@type":"ListItem","position":2,"name":"背包进阶","item":"https://blog.zzsqwq.cn/posts/21/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"背包进阶","name":"背包进阶","description":"1. 分组背包 题意 在01背包基础上，将其中的物体分成 $k$ 组，每组内的物品相互冲突，即只能取其中一个，问最大价值。\n","keywords":["Luogu","dp","背包"],"articleBody":"1. 分组背包 题意 在01背包基础上，将其中的物体分成 $k$ 组，每组内的物品相互冲突，即只能取其中一个，问最大价值。\n思路 同一组中各个物品是相互排斥的，那么我们对于处理可以外层循环组别，然后循环体积，最后循环组内的物品，然后套用01背包的转移方程 $dp[i]=max(dp[i],dp[i-v[k]]+w[k])$ 即可。我们来思考一下他的正确性，为什么只要这样循环就能确保每个组最多只取用一种呢？很明显组内的我们对于同一个体积 $V$ ，求体积 $V$ 对应的最大价值的时候，是从这个组内所有物品中取了能获得最大价值的策略，很明显当我们转移任何一个 $dp[i-v[k]]$ 的状态的时候，他们其中都不包含第 $i$ 组的物品，都是只包含了前 $i-1$ 组的物品，因为我们最终取得最大价值的路径是确定的，因此通过这个方式我们就可以确保每个组内只取一种，但是如果体积和组内物品的循环调换过来，就不行了，因为之前的状态就会包含当前组内的其他物品。\n代码实现 #include #include #include #include #include using namespace std; const int maxn =1005; const int maxt = 105; struct item { int a,b; }p[maxt][maxn]; int cnt[maxt]; int n,m; int dp[maxn]; int q,w,e,maxe; int main() { scanf(\"%d%d\",\u0026m,\u0026n); for(int i=1;i\u003c=n;i++) { scanf(\"%d%d%d\",\u0026q,\u0026w,\u0026e); cnt[e]++; p[e][cnt[e]].a=q; p[e][cnt[e]].b=w; maxe=max(maxe,e); } for(int i=1;i\u003c=maxe;i++) { for(int j=m;j\u003e=0;j--) { for(int k=1;k\u003c=cnt[i];k++) { if(j\u003e=p[i][k].a) dp[j]=max(dp[j],dp[j-p[i][k].a]+p[i][k].b); } } } printf(\"%d\",dp[m]); } 2. 有依赖的背包 题意 在01背包的基础上给物品加上依赖，某个物品可能为附件，必须买了主件之后才能买。规定一个物品最多有两个附件，并且附件不会再有附件，也不存在循环依赖（附件再依赖于主件）。问能获得的最大价值为多少。\n思路 这道题有三种思路，难度依次递增。\n这道题的附件很少，可能为0，1，2。那么我们就在01背包的基础上，分五种情况来转移，分别是都不买，只买一个主件，只买主件和附件1，只买主件和附件2，买主件和两个附件。然后在这个基础上取一个最大的即可。但是这个思路对于附件可以很多的情况，就会特别麻烦。 第二种思路是转化成分组背包，我们注意到对于每一个主件和附件的搭配都是唯一的，也就是每种方案都是互斥的。好比最多那五种情况，我们就可以分成一组。然后进行分组背包即可。那么我们分组的时候，可以考虑到一个优化，也就是如果他们的体积相同，我们只需要选价值大的那个就可以啦。所以我们先对主件和附件这个集合，进行01背包，然后背出来相同体积下最大价值的方案，分到对应组里。这个思路对于附件也有附件的情况，就不好写了，不能直接01背包。 第三种思路可以应对附件也有附件的情况，可以用森林来表示所有物品之间的关系，然后树上dp做。然而，我不会。QAQ… 代码实现 #include #include #include #include #include using namespace std; const int maxn=32005; const int maxm=65; int n,m; int num[maxm]; struct Item { int v,p,q; }item[maxm],minor[maxm][maxm]; int dp[maxn],cnt[maxm]; int vi[maxm][maxm],pi[maxm][maxm]; int main() { scanf(\"%d%d\",\u0026n,\u0026m); for(int i=1;i\u003c=m;i++) { scanf(\"%d%d%d\",\u0026item[i].v,\u0026item[i].p,\u0026item[i].q); if(item[i].q) { num[item[i].q]++; minor[item[i].q][num[item[i].q]].v=item[i].v; minor[item[i].q][num[item[i].q]].p=item[i].v*item[i].p; } } for(int i=1;i\u003c=m;i++) { if(num[i]) { memset(dp,-1,sizeof(dp)); dp[0]=0; for(int j=1;j\u003c=num[i];j++) { for(int k=n-item[i].v;k\u003e=minor[i][j].v;k--) { if(dp[k-minor[i][j].v]!=-1) { dp[k]=max(dp[k],dp[k-minor[i][j].v]+minor[i][j].p);\t} } } for(int k=0;k\u003c=n-item[i].v;k++) { if(dp[k]!=-1) { cnt[i]++; vi[i][cnt[i]]=k+item[i].v; pi[i][cnt[i]]=dp[k]+item[i].v*item[i].p; } } } if(!item[i].q) { cnt[i]++; vi[i][cnt[i]]=item[i].v; pi[i][cnt[i]]=item[i].v*item[i].p; } } memset(dp,0,sizeof(dp)); for(int i=1;i\u003c=m;i++) { if(!cnt[i]) continue; for(int j=n;j\u003e=0;j--) { for(int k=1;k\u003c=cnt[i];k++) { if(j\u003e=vi[i][k]) { dp[j]=max(dp[j],dp[j-vi[i][k]]+pi[i][k]); } } } } //\tint ans; //\tfor(int i=1;i\u003c=n;i++) ans=max(ans,dp[i]); printf(\"%d\",dp[n]); return 0; } 3. 多米诺骨牌(隐式背包) 题意 多米诺骨牌有上下两个部分，分别具有一定点数。所有多米诺骨牌上部分点数之和与下部分点数之和差的绝对值为 $x$ ，多米诺骨牌可以进行上下翻转，问当 $x$ 最小的时候最少翻转几次。\n思路 害，本来好像没有隐式背包这个说法，我自己瞎起的名字。。其实就是没那么裸的背包，实际上转化一下还是道背包的题。这道题本来其实看起来和背包没有什么关系，但是实际想一想，假如我们把所有多米诺骨牌一开始都调成上面大下面小的情况，然后调整过的把他的消耗值设为-1，没有调整过的把消耗值设为1。达成上大下小目的需要消耗的次数为n。调整后的上下点数差为V。我们每次调整之后 $V$ 会减少牌的上下点数之差，这就是我们需要的体积。然后一开始把 $dp[V]$ 设为n。然后转移方程为 $dp[i]=min(dp[i],dp[i+v[i]]+w[i]) $ 最后只需要求从 $0\\sim V$ 最小的那个点数差对应的翻转次数值就可以了。\n代码实现 #include #include #include #include #include using namespace std; const int maxn=1005; int ini; int n; int up[maxn],down[maxn]; int v[maxn],w[maxn]; int dp[10005]; int V; int main() { scanf(\"%d\",\u0026n); for(int i=1;i\u003c=n;i++) { scanf(\"%d%d\",\u0026up[i],\u0026down[i]); if(up[i]\u003e=down[i]) { V+=up[i]-down[i]; v[i]=(up[i]-down[i])*2; w[i]=1; } else { V+=down[i]-up[i]; ini++; v[i]=(down[i]-up[i])*2; w[i]=-1; } } for(int i=0;i\u003c=V;i++) dp[i]=233333; //\tdp[V]=ini; dp[V]=ini; for(int i=1;i\u003c=n;i++) { for(int j=0;j\u003c=V-v[i];j++) { if(dp[j+v[i]]!=233333) dp[j]=min(dp[j],dp[j+v[i]]+w[i]); } } for(int i=0;i\u003c=V;i++) { if(dp[i]!=233333) { printf(\"%d\",dp[i]); break; } } return 0; } ","wordCount":"295","inLanguage":"en","datePublished":"2020-02-09T00:38:00Z","dateModified":"2020-02-09T00:38:00Z","author":{"@type":"Person","name":"zzsqwq"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.zzsqwq.cn/posts/21/"},"publisher":{"@type":"Organization","name":"Zs's Blog","logo":{"@type":"ImageObject","url":"https://blog.zzsqwq.cn/images/avatar.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.zzsqwq.cn/ accesskey=h title="Zs's Blog (Alt + H)">Zs's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.zzsqwq.cn/about title=About><span>About</span></a></li><li><a href=https://blog.zzsqwq.cn/archives title=Posts><span>Posts</span></a></li><li><a href=https://blog.zzsqwq.cn/friends title=Friends><span>Friends</span></a></li><li><a href=https://blog.zzsqwq.cn/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.zzsqwq.cn/>Home</a>&nbsp;»&nbsp;<a href=https://blog.zzsqwq.cn/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">背包进阶</h1><div class=post-meta><span title='2020-02-09 00:38:00 +0000 UTC'>February 9, 2020</span>&nbsp;·&nbsp;zzsqwq&nbsp;|&nbsp;<a href=https://github.com/zzsqwq/zzsqwq.github.io/tree/master/content/posts/%e8%83%8c%e5%8c%85%e8%bf%9b%e9%98%b6.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#1-%e5%88%86%e7%bb%84%e8%83%8c%e5%8c%85 aria-label="1. 分组背包">1. 分组背包</a><ul><li><a href=#%e9%a2%98%e6%84%8f aria-label=题意>题意</a></li><li><a href=#%e6%80%9d%e8%b7%af aria-label=思路>思路</a></li><li><a href=#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0 aria-label=代码实现>代码实现</a></li></ul></li><li><a href=#2-%e6%9c%89%e4%be%9d%e8%b5%96%e7%9a%84%e8%83%8c%e5%8c%85 aria-label="2. 有依赖的背包">2. 有依赖的背包</a><ul><li><a href=#%e9%a2%98%e6%84%8f-1 aria-label=题意>题意</a></li><li><a href=#%e6%80%9d%e8%b7%af-1 aria-label=思路>思路</a></li><li><a href=#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0-1 aria-label=代码实现>代码实现</a></li></ul></li><li><a href=#3-%e5%a4%9a%e7%b1%b3%e8%af%ba%e9%aa%a8%e7%89%8c%e9%9a%90%e5%bc%8f%e8%83%8c%e5%8c%85 aria-label="3. 多米诺骨牌(隐式背包)">3. 多米诺骨牌(隐式背包)</a><ul><li><a href=#%e9%a2%98%e6%84%8f-2 aria-label=题意>题意</a></li><li><a href=#%e6%80%9d%e8%b7%af-2 aria-label=思路>思路</a></li><li><a href=#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0-2 aria-label=代码实现>代码实现</a></li></ul></li></ul></div></details></div><div class=post-content><h3 id=1-分组背包>1. <a href=https://www.luogu.com.cn/problem/P1757>分组背包</a><a hidden class=anchor aria-hidden=true href=#1-分组背包>#</a></h3><hr><h4 id=题意>题意<a hidden class=anchor aria-hidden=true href=#题意>#</a></h4><p>在01背包基础上，将其中的物体分成 $k$ 组，每组内的物品相互冲突，即只能取其中一个，问最大价值。</p><hr><h4 id=思路>思路<a hidden class=anchor aria-hidden=true href=#思路>#</a></h4><p>同一组中各个物品是相互排斥的，那么我们对于处理可以外层循环组别，然后循环体积，最后循环组内的物品，然后套用01背包的转移方程 $dp[i]=max(dp[i],dp[i-v[k]]+w[k])$ 即可。我们来思考一下他的正确性，为什么只要这样循环就能确保每个组最多只取用一种呢？很明显组内的我们对于同一个体积 $V$ ，求体积 $V$ 对应的最大价值的时候，是从这个组内所有物品中取了能获得最大价值的策略，很明显当我们转移任何一个 $dp[i-v[k]]$ 的状态的时候，他们其中都不包含第 $i$ 组的物品，都是只包含了前 $i-1$ 组的物品，因为我们最终取得最大价值的路径是确定的，因此通过这个方式我们就可以确保每个组内只取一种，但是如果体积和组内物品的循环调换过来，就不行了，因为之前的状态就会包含当前组内的其他物品。</p><hr><h4 id=代码实现>代码实现<a hidden class=anchor aria-hidden=true href=#代码实现>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include&lt;cstdio&gt;
</span></span></span><span class=line><span class=cl><span class=cp>#include&lt;cstring&gt;
</span></span></span><span class=line><span class=cl><span class=cp>#include&lt;algorithm&gt;
</span></span></span><span class=line><span class=cl><span class=cp>#include&lt;cmath&gt;
</span></span></span><span class=line><span class=cl><span class=cp>#include&lt;iostream&gt;
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>maxn</span> <span class=o>=</span><span class=mi>1005</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>maxt</span> <span class=o>=</span> <span class=mi>105</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>item</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>a</span><span class=p>,</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=n>p</span><span class=p>[</span><span class=n>maxt</span><span class=p>][</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>cnt</span><span class=p>[</span><span class=n>maxt</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>n</span><span class=p>,</span><span class=n>m</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>dp</span><span class=p>[</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>q</span><span class=p>,</span><span class=n>w</span><span class=p>,</span><span class=n>e</span><span class=p>,</span><span class=n>maxe</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>scanf</span><span class=p>(</span><span class=s>&#34;%d%d&#34;</span><span class=p>,</span><span class=o>&amp;</span><span class=n>m</span><span class=p>,</span><span class=o>&amp;</span><span class=n>n</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>scanf</span><span class=p>(</span><span class=s>&#34;%d%d%d&#34;</span><span class=p>,</span><span class=o>&amp;</span><span class=n>q</span><span class=p>,</span><span class=o>&amp;</span><span class=n>w</span><span class=p>,</span><span class=o>&amp;</span><span class=n>e</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=n>cnt</span><span class=p>[</span><span class=n>e</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=n>p</span><span class=p>[</span><span class=n>e</span><span class=p>][</span><span class=n>cnt</span><span class=p>[</span><span class=n>e</span><span class=p>]].</span><span class=n>a</span><span class=o>=</span><span class=n>q</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=n>p</span><span class=p>[</span><span class=n>e</span><span class=p>][</span><span class=n>cnt</span><span class=p>[</span><span class=n>e</span><span class=p>]].</span><span class=n>b</span><span class=o>=</span><span class=n>w</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=n>maxe</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>maxe</span><span class=p>,</span><span class=n>e</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>maxe</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>j</span><span class=o>=</span><span class=n>m</span><span class=p>;</span><span class=n>j</span><span class=o>&gt;=</span><span class=mi>0</span><span class=p>;</span><span class=n>j</span><span class=o>--</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>k</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>k</span><span class=o>&lt;=</span><span class=n>cnt</span><span class=p>[</span><span class=n>i</span><span class=p>];</span><span class=n>k</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span><span class=p>(</span><span class=n>j</span><span class=o>&gt;=</span><span class=n>p</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>].</span><span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				<span class=n>dp</span><span class=p>[</span><span class=n>j</span><span class=p>]</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>j</span><span class=p>],</span><span class=n>dp</span><span class=p>[</span><span class=n>j</span><span class=o>-</span><span class=n>p</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>].</span><span class=n>a</span><span class=p>]</span><span class=o>+</span><span class=n>p</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>].</span><span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=n>printf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span><span class=n>dp</span><span class=p>[</span><span class=n>m</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=p>}</span> 
</span></span></code></pre></div><hr><h3 id=2-有依赖的背包>2. <a href=https://www.luogu.com.cn/problem/U65320>有依赖的背包</a><a hidden class=anchor aria-hidden=true href=#2-有依赖的背包>#</a></h3><hr><h4 id=题意-1>题意<a hidden class=anchor aria-hidden=true href=#题意-1>#</a></h4><p>在01背包的基础上给物品加上依赖，某个物品可能为附件，必须买了主件之后才能买。规定一个物品最多有两个附件，并且附件不会再有附件，也不存在循环依赖（附件再依赖于主件）。问能获得的最大价值为多少。</p><hr><h4 id=思路-1>思路<a hidden class=anchor aria-hidden=true href=#思路-1>#</a></h4><p>这道题有三种思路，难度依次递增。</p><ul><li>这道题的附件很少，可能为0，1，2。那么我们就在01背包的基础上，分五种情况来转移，分别是都不买，只买一个主件，只买主件和附件1，只买主件和附件2，买主件和两个附件。然后在这个基础上取一个最大的即可。但是这个思路对于附件可以很多的情况，就会特别麻烦。</li><li>第二种思路是转化成分组背包，我们注意到对于每一个主件和附件的搭配都是唯一的，也就是每种方案都是互斥的。好比最多那五种情况，我们就可以分成一组。然后进行分组背包即可。那么我们分组的时候，可以考虑到一个优化，也就是如果他们的体积相同，我们只需要选价值大的那个就可以啦。所以我们先对主件和附件这个集合，进行01背包，然后背出来相同体积下最大价值的方案，分到对应组里。这个思路对于附件也有附件的情况，就不好写了，不能直接01背包。</li><li>第三种思路可以应对附件也有附件的情况，可以用森林来表示所有物品之间的关系，然后树上dp做。然而，我不会。QAQ&mldr;</li></ul><hr><h4 id=代码实现-1>代码实现<a hidden class=anchor aria-hidden=true href=#代码实现-1>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include&lt;cstdio&gt;
</span></span></span><span class=line><span class=cl><span class=cp>#include&lt;cstring&gt;
</span></span></span><span class=line><span class=cl><span class=cp>#include&lt;algorithm&gt;
</span></span></span><span class=line><span class=cl><span class=cp>#include&lt;cmath&gt;
</span></span></span><span class=line><span class=cl><span class=cp>#include&lt;iostream&gt;
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>maxn</span><span class=o>=</span><span class=mi>32005</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>maxm</span><span class=o>=</span><span class=mi>65</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>n</span><span class=p>,</span><span class=n>m</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>num</span><span class=p>[</span><span class=n>maxm</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Item</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>v</span><span class=p>,</span><span class=n>p</span><span class=p>,</span><span class=n>q</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=n>item</span><span class=p>[</span><span class=n>maxm</span><span class=p>],</span><span class=n>minor</span><span class=p>[</span><span class=n>maxm</span><span class=p>][</span><span class=n>maxm</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>dp</span><span class=p>[</span><span class=n>maxn</span><span class=p>],</span><span class=n>cnt</span><span class=p>[</span><span class=n>maxm</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>vi</span><span class=p>[</span><span class=n>maxm</span><span class=p>][</span><span class=n>maxm</span><span class=p>],</span><span class=n>pi</span><span class=p>[</span><span class=n>maxm</span><span class=p>][</span><span class=n>maxm</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>scanf</span><span class=p>(</span><span class=s>&#34;%d%d&#34;</span><span class=p>,</span><span class=o>&amp;</span><span class=n>n</span><span class=p>,</span><span class=o>&amp;</span><span class=n>m</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>m</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>scanf</span><span class=p>(</span><span class=s>&#34;%d%d%d&#34;</span><span class=p>,</span><span class=o>&amp;</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>v</span><span class=p>,</span><span class=o>&amp;</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>p</span><span class=p>,</span><span class=o>&amp;</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>q</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>q</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>num</span><span class=p>[</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>q</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=n>minor</span><span class=p>[</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>q</span><span class=p>][</span><span class=n>num</span><span class=p>[</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>q</span><span class=p>]].</span><span class=n>v</span><span class=o>=</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>v</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=n>minor</span><span class=p>[</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>q</span><span class=p>][</span><span class=n>num</span><span class=p>[</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>q</span><span class=p>]].</span><span class=n>p</span><span class=o>=</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>v</span><span class=o>*</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>m</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=n>num</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>memset</span><span class=p>(</span><span class=n>dp</span><span class=p>,</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=k>sizeof</span><span class=p>(</span><span class=n>dp</span><span class=p>));</span>
</span></span><span class=line><span class=cl>			<span class=n>dp</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>j</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>j</span><span class=o>&lt;=</span><span class=n>num</span><span class=p>[</span><span class=n>i</span><span class=p>];</span><span class=n>j</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>k</span><span class=o>=</span><span class=n>n</span><span class=o>-</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>v</span><span class=p>;</span><span class=n>k</span><span class=o>&gt;=</span><span class=n>minor</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>].</span><span class=n>v</span><span class=p>;</span><span class=n>k</span><span class=o>--</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				<span class=p>{</span>
</span></span><span class=line><span class=cl>					<span class=k>if</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>k</span><span class=o>-</span><span class=n>minor</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>].</span><span class=n>v</span><span class=p>]</span><span class=o>!=-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					<span class=p>{</span>
</span></span><span class=line><span class=cl>						<span class=n>dp</span><span class=p>[</span><span class=n>k</span><span class=p>]</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>k</span><span class=p>],</span><span class=n>dp</span><span class=p>[</span><span class=n>k</span><span class=o>-</span><span class=n>minor</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>].</span><span class=n>v</span><span class=p>]</span><span class=o>+</span><span class=n>minor</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>].</span><span class=n>p</span><span class=p>);</span>	
</span></span><span class=line><span class=cl>					<span class=p>}</span>
</span></span><span class=line><span class=cl>				<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>k</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>k</span><span class=o>&lt;=</span><span class=n>n</span><span class=o>-</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>v</span><span class=p>;</span><span class=n>k</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>k</span><span class=p>]</span><span class=o>!=-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				<span class=p>{</span>
</span></span><span class=line><span class=cl>					<span class=n>cnt</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>					<span class=n>vi</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>cnt</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span><span class=o>=</span><span class=n>k</span><span class=o>+</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>v</span><span class=p>;</span>
</span></span><span class=line><span class=cl>					<span class=n>pi</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>cnt</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span><span class=o>=</span><span class=n>dp</span><span class=p>[</span><span class=n>k</span><span class=p>]</span><span class=o>+</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>v</span><span class=o>*</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>				<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>q</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>cnt</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=n>vi</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>cnt</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span><span class=o>=</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>v</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=n>pi</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>cnt</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span><span class=o>=</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>v</span><span class=o>*</span><span class=n>item</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=n>memset</span><span class=p>(</span><span class=n>dp</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=k>sizeof</span><span class=p>(</span><span class=n>dp</span><span class=p>));</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>m</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>cnt</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>j</span><span class=o>=</span><span class=n>n</span><span class=p>;</span><span class=n>j</span><span class=o>&gt;=</span><span class=mi>0</span><span class=p>;</span><span class=n>j</span><span class=o>--</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>k</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>k</span><span class=o>&lt;=</span><span class=n>cnt</span><span class=p>[</span><span class=n>i</span><span class=p>];</span><span class=n>k</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span><span class=p>(</span><span class=n>j</span><span class=o>&gt;=</span><span class=n>vi</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>])</span>
</span></span><span class=line><span class=cl>				<span class=p>{</span>
</span></span><span class=line><span class=cl>					<span class=n>dp</span><span class=p>[</span><span class=n>j</span><span class=p>]</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>j</span><span class=p>],</span><span class=n>dp</span><span class=p>[</span><span class=n>j</span><span class=o>-</span><span class=n>vi</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]]</span><span class=o>+</span><span class=n>pi</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>				<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//	int ans;
</span></span></span><span class=line><span class=cl><span class=c1>//	for(int i=1;i&lt;=n;i++) ans=max(ans,dp[i]);
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>printf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span><span class=n>dp</span><span class=p>[</span><span class=n>n</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> 
</span></span></code></pre></div><hr><h3 id=3-多米诺骨牌隐式背包>3. <a href=https://www.luogu.com.cn/problem/P1282>多米诺骨牌(隐式背包)</a><a hidden class=anchor aria-hidden=true href=#3-多米诺骨牌隐式背包>#</a></h3><hr><h4 id=题意-2>题意<a hidden class=anchor aria-hidden=true href=#题意-2>#</a></h4><p>多米诺骨牌有上下两个部分，分别具有一定点数。所有多米诺骨牌上部分点数之和与下部分点数之和差的绝对值为 $x$ ，多米诺骨牌可以进行上下翻转，问当 $x$ 最小的时候最少翻转几次。</p><hr><h4 id=思路-2>思路<a hidden class=anchor aria-hidden=true href=#思路-2>#</a></h4><p>害，本来好像没有隐式背包这个说法，我自己瞎起的名字。。其实就是没那么裸的背包，实际上转化一下还是道背包的题。这道题本来其实看起来和背包没有什么关系，但是实际想一想，假如我们把所有多米诺骨牌一开始都调成上面大下面小的情况，然后调整过的把他的消耗值设为-1，没有调整过的把消耗值设为1。达成上大下小目的需要消耗的次数为n。调整后的上下点数差为V。我们每次调整之后 $V$ 会减少牌的上下点数之差，这就是我们需要的体积。然后一开始把 $dp[V]$ 设为n。然后转移方程为 $dp[i]=min(dp[i],dp[i+v[i]]+w[i]) $ 最后只需要求从 $0\sim V$ 最小的那个点数差对应的翻转次数值就可以了。</p><hr><h4 id=代码实现-2>代码实现<a hidden class=anchor aria-hidden=true href=#代码实现-2>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include&lt;cstdio&gt;
</span></span></span><span class=line><span class=cl><span class=cp>#include&lt;cstring&gt;
</span></span></span><span class=line><span class=cl><span class=cp>#include&lt;algorithm&gt;
</span></span></span><span class=line><span class=cl><span class=cp>#include&lt;cmath&gt;
</span></span></span><span class=line><span class=cl><span class=cp>#include&lt;iostream&gt;
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>maxn</span><span class=o>=</span><span class=mi>1005</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>ini</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>n</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>up</span><span class=p>[</span><span class=n>maxn</span><span class=p>],</span><span class=n>down</span><span class=p>[</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>v</span><span class=p>[</span><span class=n>maxn</span><span class=p>],</span><span class=n>w</span><span class=p>[</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>dp</span><span class=p>[</span><span class=mi>10005</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>V</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span><span class=o>&amp;</span><span class=n>n</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>scanf</span><span class=p>(</span><span class=s>&#34;%d%d&#34;</span><span class=p>,</span><span class=o>&amp;</span><span class=n>up</span><span class=p>[</span><span class=n>i</span><span class=p>],</span><span class=o>&amp;</span><span class=n>down</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=n>up</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>&gt;=</span><span class=n>down</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>V</span><span class=o>+=</span><span class=n>up</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>-</span><span class=n>down</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>			<span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=p>(</span><span class=n>up</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>-</span><span class=n>down</span><span class=p>[</span><span class=n>i</span><span class=p>])</span><span class=o>*</span><span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>else</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>V</span><span class=o>+=</span><span class=n>down</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>-</span><span class=n>up</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>			<span class=n>ini</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=p>(</span><span class=n>down</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>-</span><span class=n>up</span><span class=p>[</span><span class=n>i</span><span class=p>])</span><span class=o>*</span><span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>V</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=mi>233333</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>//	dp[V]=ini;
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>dp</span><span class=p>[</span><span class=n>V</span><span class=p>]</span><span class=o>=</span><span class=n>ini</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>j</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>j</span><span class=o>&lt;=</span><span class=n>V</span><span class=o>-</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>];</span><span class=n>j</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>j</span><span class=o>+</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span><span class=o>!=</span><span class=mi>233333</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=n>dp</span><span class=p>[</span><span class=n>j</span><span class=p>]</span><span class=o>=</span><span class=n>min</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>j</span><span class=p>],</span><span class=n>dp</span><span class=p>[</span><span class=n>j</span><span class=o>+</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span><span class=o>+</span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>V</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>!=</span><span class=mi>233333</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>printf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span> 
</span></span><span class=line><span class=cl>			<span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><hr></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.zzsqwq.cn/tags/luogu/>Luogu</a></li><li><a href=https://blog.zzsqwq.cn/tags/dp/>Dp</a></li><li><a href=https://blog.zzsqwq.cn/tags/%E8%83%8C%E5%8C%85/>背包</a></li></ul><nav class=paginav><a class=prev href=https://blog.zzsqwq.cn/posts/22/><span class=title>« Prev</span><br><span>Codeforces #618 (Div.2)</span>
</a><a class=next href=https://blog.zzsqwq.cn/posts/20/><span class=title>Next »</span><br><span>一些关于背包的题</span></a></nav></footer><div class=comments><script>let getTheme=window.localStorage&&window.localStorage.getItem("pref-theme");getTheme=getTheme??"preferred_color_scheme";let s=document.createElement("script");s.src="https://giscus.app/client.js",s.setAttribute("data-repo","zzsqwq/hugo-blog-comment"),s.setAttribute("data-repo-id","R_kgDOGgU1qQ"),s.setAttribute("data-category","Announcements"),s.setAttribute("data-category-id","DIC_kwDOGgU1qc4CSX1m"),s.setAttribute("data-mapping","pathname"),s.setAttribute("data-strict","0"),s.setAttribute("data-reactions-enabled","1"),s.setAttribute("data-emit-metadata","0"),s.setAttribute("data-input-position","top"),s.setAttribute("data-theme",getTheme),s.setAttribute("data-lang",""),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",""),document.querySelector("div.comments").innerHTML="",document.querySelector("div.comments").appendChild(s)</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.zzsqwq.cn/>Zs's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a> | <a href=http://beian.miit.gov.cn/ target=_blank>鲁ICP备2020034310号</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>function sendMessage(e){const t=document.querySelector("iframe.giscus-frame");if(!t)return;t.contentWindow.postMessage({giscus:e},"https://giscus.app")}document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light"),sendMessage({setConfig:{theme:"light"}})):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"),sendMessage({setConfig:{theme:"dark"}}))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>